same as `map_to_array` but array is read-only
