Creates template visitor with given rules.
