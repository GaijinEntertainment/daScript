if `value` is true, then empty arrays are not written at all
