template instance is determined by having parent == template.parent
