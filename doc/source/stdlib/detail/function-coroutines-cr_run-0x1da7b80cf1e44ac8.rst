This function runs coroutine until it is finished.
