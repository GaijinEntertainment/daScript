Yields all but the last `total` elements from an iterator and returns an array
